就这样吧，实在看不懂作者的伪代码，还有些函数就没声明干啥的，就有个引用就完了。。。。尽力了